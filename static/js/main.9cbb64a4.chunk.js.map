{"version":3,"sources":["components/LoginModal/index.js","components/SendUserMessage/index.js","components/UserList/index.js","components/Chat/index.js","App.js","reportWebVitals.js","index.js"],"names":["LoginModal","props","useState","URL","setURL","username","setUsername","password","setPassword","disableChat","className","onSubmit","e","preventDefault","loginURL","data","FormData","append","fetch","method","body","then","response","ok","json","Error","status","sessionStorage","token","url","onSetDisableChat","catch","console","log","alert","htmlFor","placeholder","value","onChange","event","target","type","SendUserMessage","message","setMessage","messageURL","headers","Headers","getItem","err","disabled","UserList","usersList","Array","from","activeUsers","sort","map","user","id","Chat","Set","users","setUsers","setMessages","onEventArrival","arr","formatTime","timeCreated","t","Date","toLocaleDateString","toLocaleTimeString","useEffect","stream","EventSource","addEventListener","JSON","parse","created","close","payload","set","oldSet","delete","removeFromUsers","newSet","add","addToUsers","App","setDisableChat","childSetDisableChat","window","clear","class","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9cbb64a4.chunk.js","sourcesContent":["import React, {useState} from \"react\";\nimport './style.css'\n\nconst LoginModal = (props) => {\n    const [URL, setURL] = useState('http://localhost:2000')\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n\n    function tryLogin(e) {\n        e.preventDefault();\n        let loginURL = URL + '/login'\n\n        let data = new FormData();\n        data.append('username', username);\n        data.append('password', password);\n        \n        fetch(loginURL, {\n            method: 'POST',\n            body: data\n        }).then(function(response) {\n            if (response.ok) {\n                return response.json();\n            } else {\n                throw new Error(response.status);\n            }\n        }).then(function(body) {\n            sessionStorage.token = body['token'];\n            sessionStorage.url = URL;\n\n            props.onSetDisableChat(false);\n        }).catch((status) => {\n            console.log(status)\n            if (status == 'Error: 403') {\n                alert('Invalid username or password');\n            }\n            if (status == 'Error: 422') {\n                alert(status + \" failure to /login\");\n            }\n        });\n    };\n\n    if (props.disableChat) {\n        return (\n            <div className=\"loginContainer\">\n                <h1 className='loginTitle'> Login </h1> <br />\n                <form className='loginform' onSubmit={tryLogin}>\n                    <label htmlFor=\"URL\">URL:</label><br/>\n                    <input placeholder='URL' className='loginInput' value={URL} onChange={(event) => setURL(event.target.value)} /><br/>\n                    <label htmlFor=\"username\">Username:</label><br/>\n                    <input placeholder='username' className='loginInput' onChange={(event) => setUsername(event.target.value)} /><br/>\n                    <label htmlFor=\"password\">Password:</label><br/>\n                    <input placeholder='password' type='password' className='loginInput' onChange={(event) => setPassword(event.target.value)} /><br/>\n                \n                    <button type=\"submit\">Submit</button>\n                </form>\n            </div>\n        )\n    } else {\n        return null\n    }\n}\n\nexport default LoginModal\n","import React, {useState} from \"react\";\nimport './style.css'\n\nconst SendUserMessage = (props) => {\n    const [message, setMessage] = useState('')\n    \n    function onSendMessage(e) {\n        e.preventDefault();\n        const messageURL = props.url + '/message'\n\n        console.log(messageURL)\n        \n        let data = new FormData();\n        data.append(\"message\", message)\n\n        fetch(messageURL, {\n            method: 'POST',\n            headers: new Headers({\"Authorization\": \"Bearer \" + sessionStorage.getItem('token')}),\n            body: data\n        }).then(function(response) {\n            let status = response.status\n            if (status === 422) {\n                alert('Please send a nonempty message')\n            }\n            else if (status === 201) {\n                setMessage('')\n            }\n            console.log(\"Token is: \" + sessionStorage.getItem('token'))\n            console.log(response);\n        }).catch( err => {\n            console.log(\"IN ERROR STATE\")\n            console.log(err);\n        });\n\n    };\n\n    return (\n        <form className=\"send-message\" onSubmit={onSendMessage}>\n            <input \n                placeholder=\"Type message here and press ENTER to send.\"\n                type=\"text\"\n                value={message}\n                onChange={(event) => {setMessage(event.target.value)}}\n                disabled={props.disabled} />\n        </form>\n    )\n}\n\nexport default SendUserMessage\n","import React, {useState} from \"react\";\nimport './style.css'\n\nconst UserList = (props) => {\n    const orderedUsers = Array.from(props.activeUsers).sort()\n    const usersList = orderedUsers.map((user, id) => {\n        return <li key={id}>{user}</li>\n    });\n\n    return (\n        <div className=\"userListContainer\" >\n            <h2 className='UserListTitle'> Active Users </h2>\n                <ul className=\"userList\">\n                    {usersList}\n                </ul>\n        </div>\n    )\n}\n\nexport default UserList\n","import React, {useEffect, useState} from \"react\";\nimport './style.css'\nimport '../SendUserMessage/style.css';\nimport '../UserList/style.css';\nimport MessageList from '../MessageList/index.js';\nimport SendUserMessage from '../SendUserMessage/index.js';\nimport UserList from '../UserList/index.js';\n\nconst Chat = (props) => {\n    const [users, setUsers] = useState(new Set())\n    const [messages, setMessages] = useState([])\n    \n    function onEventArrival(event) {\n        setMessages(arr => [...arr, event]);\n    };\n\n    function addToUsers(event) {\n        setUsers((set) => {\n            let newSet = new Set(set);\n            newSet.add(event);\n            return newSet;\n        });\n    };\n\n    function removeFromUsers(event) {\n        setUsers((set) => {\n            let oldSet = new Set(set);\n            oldSet.delete(event);\n            return oldSet;\n        });\n    };\n\n    function formatTime(timeCreated) {\n        var t = new Date(timeCreated * 1000);\n        var formatted = t.toLocaleDateString(\"en-US\") + \" \" + t.toLocaleTimeString(\"en-US\")\n        return formatted\n    };\n\n    useEffect(() => {\n        console.log('edited users')\n        console.log(users)\n    }, [users]);\n\n    useEffect(() => {\n        if (!props.disableChat) {\n            let stream = new EventSource(\n                sessionStorage.getItem('url') + \"/stream/\" + sessionStorage.getItem('token')\n            );\n\n            // done\n            stream.addEventListener(\n                \"Users\",\n                function(event) {\n                    setUsers(new Set(JSON.parse(event.data).users));                    \n                },\n                false\n            );\n\n            stream.addEventListener(\n                \"Message\",\n                function(event) {\n                    const formattedTime = formatTime(JSON.parse(event.data).created)\n                    onEventArrival(formattedTime + \" (\" + JSON.parse(event.data).user + \") \" + JSON.parse(event.data).message)\n                    console.log(JSON.parse(event.data))\n                },\n                false\n            );\n\n            // done\n            stream.addEventListener(\n                \"Disconnect\",\n                function(event) {\n                    stream.close()\n                    props.onSetDisableChat(true)\n                    console.log(JSON.parse(event.data))\n                },\n                false\n            );\n\n            // done\n            stream.addEventListener(\n                \"ServerStatus\",\n                function(event) {\n                    const formattedTime = formatTime(JSON.parse(event.data).created)\n                    onEventArrival(formattedTime + \" STATUS: \" + JSON.parse(event.data).status)\n                    console.log(JSON.parse(event.data))\n                },\n                false\n            );\n\n            // done\n            stream.addEventListener(\n                \"Part\",\n                function(event) {\n                    let payload = JSON.parse(event.data);\n\n                    const formattedTime = formatTime(payload.created);\n                    onEventArrival(formattedTime + \" PART: \" + payload.user);\n                    removeFromUsers(payload.user);                    \n                },\n                false\n            );\n\n            // done\n            stream.addEventListener(\n                \"Join\",\n                function(event) {\n                    let payload = JSON.parse(event.data);\n\n                    const formattedTime = formatTime(payload.created);\n                    onEventArrival(formattedTime + \" JOIN: \" + payload.user);\n                    addToUsers(payload.user);\n                },\n                false\n            );\n        }\n\n        console.log('visited effect')\n    }, [props.disableChat]);\n\n\n    if (!props.disableChat) {\n        return (\n            <window id=\"chatContainer\">\n                <div className = \"chat\"></div>\n                <UserList activeUsers={users}/>\n                    \n                <SendUserMessage\n                    url={sessionStorage.getItem(\"url\")}\n                    disabled={props.disableChat} />\n                \n            </window>\n\n        )\n    } else {\n        return null\n    }\n}\n\nexport default Chat\n","// import logo from './logo.svg';\nimport './App.css'\nimport './components/Chat/style.css';\nimport './components/SendUserMessage/style.css';\nimport './components/UserList/style.css';\nimport React, {useEffect, useState} from \"react\";\nimport LoginModal from './components/LoginModal/index.js'\nimport Chat from './components/Chat/index.js';\n\nconst App = () => {\n    const [disableChat, setDisableChat] = useState(true)\n\n    // check for duplicate case\n    useEffect(()=>{\n        if (sessionStorage.getItem('token') !== null) {\n            setDisableChat(false);\n        }\n    }, []);\n\n    // wipe session storage on reload\n    window.addEventListener('unload', function(event) {\n        sessionStorage.clear();\n    });\n\n    function childSetDisableChat(value) {\n        setDisableChat(value)\n    }\n\n    return (\n        <div className=\"App\">\n            <div class=\"header\">\n                <h1>DogeChat</h1>\n            </div>\n            <LoginModal\n                disableChat={disableChat}\n                onSetDisableChat={childSetDisableChat} />\n            <Chat\n                disableChat={disableChat}\n                onSetDisableChat={childSetDisableChat} />\n        </div>\n    )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}